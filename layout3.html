<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>MES-AI-A（レイアウト3）</title>
  <link rel="stylesheet" href="styles.patched.css" />
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body class="third-layout">
  <div class="app">
    <header class="app-header">
      <div class="app-title">MES-AI-A（詳細ビュー / レイアウト3）</div>
      <div id="headerStatus" class="header-status"></div>
    </header>

    <div id="metricsBar" class="metrics-bar">
      <div class="metrics-bar-head">
        <div class="metrics-bar-title">指標カスタマイズ</div>
        <div class="metrics-bar-actions">
          <button id="metricsCollapseBtn" type="button">折りたたむ</button>
          <button id="resetCurrentBtn" type="button">初期化</button>
          <button id="clearCardsBtn" type="button">表示中ASINクリア</button>
          <button id="clearCartBtn" type="button">カートクリア</button>
        </div>
      </div>

      <div id="sortBar">
        <div class="sort-title">表示中ASINのソート（真ん中の枠の指標）</div>
        <div id="sortControls" class="sort-controls"></div>
        <div class="sort-actions">
          <button id="addSortRuleBtn" type="button">条件を追加</button>
          <button id="applySortBtn" class="primary" type="button">ソート適用</button>
          <button id="clearSortBtn" type="button">ソート解除</button>
        </div>
      </div>

      <!-- ★追加：重要視項目 -->
      <div id="importantBar">
        <div class="important-title">重要視項目（プールから選択 / すべて満たすASINに🔥）</div>
        <div id="importantControls" class="important-controls"></div>
        <div class="important-actions">
          <button id="addImportantRuleBtn" type="button">条件を追加</button>
          <button id="applyImportantBtn" class="primary" type="button">適用</button>
          <button id="clearImportantBtn" type="button">解除</button>
        </div>
      </div>

      <div class="metrics-row">
        <section class="metrics-box">
          <div class="metrics-box-title">プール</div>
          <div id="metricsPoolZone" class="metrics-zone"></div>
        </section>

        <section class="metrics-box">
          <div class="metrics-box-title">商品情報</div>
          <div id="metricsInfoZone" class="metrics-zone"></div>
        </section>

        <section class="metrics-box">
          <div class="metrics-box-title">真ん中</div>
          <div id="metricsCenterZone" class="metrics-zone"></div>
        </section>

        <section class="metrics-box">
          <div class="metrics-box-title">下段</div>
          <div id="metricsTableZone" class="metrics-zone"></div>
        </section>

        <section class="metrics-box">
          <div class="metrics-box-title">非表示</div>
          <div id="metricsHiddenZone" class="metrics-zone"></div>
        </section>
      </div>

      <div class="metrics-bar-foot">
        ※ 指標ピルをドラッグ&ドロップで移動できます（重複は不可）。
      </div>
    </div>

    <section class="asin-catalog card">
      <div class="asin-catalog-head">
        <div class="asin-catalog-title">ASIN一覧（クリックで追加）</div>
      </div>
      <div id="asinCatalog" class="asin-catalog-body"></div>
    </section>

    <section class="cart-summary card">
      <div class="cart-grid">
        <div class="cart-kpi">
          <div class="k-label">仕入れ合計</div>
          <div id="cartTotalCost" class="k-value">￥0</div>
        </div>
        <div class="cart-kpi">
          <div class="k-label">売上合計（円換算）</div>
          <div id="cartTotalRevenue" class="k-value">￥0</div>
        </div>
        <div class="cart-kpi">
          <div class="k-label">利益（概算）</div>
          <div id="cartTotalProfit" class="k-value">￥0</div>
        </div>
        <div class="cart-kpi">
          <div class="k-label">ASIN数</div>
          <div id="cartAsinCount" class="k-value">0</div>
        </div>
        <div class="cart-kpi">
          <div class="k-label">数量合計</div>
          <div id="cartItemCount" class="k-value">0</div>
        </div>
      </div>
    </section>

    <main id="itemsContainer" class="items"></main>

    <div id="emptyState" class="empty-state">
      左のASIN一覧から追加してください
    </div>
  </div>

  <script src="asin-data.js"></script>
  <script src="main.js"></script>
</body>
</html>
